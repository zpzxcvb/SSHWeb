<!DOCTYPE html>
<html>
<head>
	<title>文章列表</title>
	<link rel="stylesheet" href="/js/lib/layui/css/layui.css">
	
	<script type="text/javascript" src="/js/lib/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="/js/lib/layui/layui.js"></script>
</head>
<body>
	<div class="layui-card">
		<div class="layui-card-header">
			<div class="layui-inline table-search">
				<div class="layui-input-inline">
					<input class="layui-input" id="key" type="search" placeholder="请输入名称">
				</div>
				<a id="searchModel" class="layui-btn"><i class="layui-icon layui-icon-search"></i> 查询</a>
			</div>
		</div>
		<div class="layui-card-body">
			<div class="">
				<a id="addModel" class="layui-btn"><i class="layui-icon layui-icon-add-1"></i>添加</a>
				<a id="deleteModel" class="layui-btn layui-btn-danger"><i class="layui-icon layui-icon-delete"></i>批量删除</a>
			</div>
			<table id="table" lay-filter="table_event"></table>
		</div>
	</div>
	<script type="text/html" id="rowbarTpl">
		<a title="预览" class="layui-btn layui-btn-xs" lay-event="preview"><i class="layui-icon layui-icon-read"></i>预览</a>
		<a title="编辑" class="layui-btn layui-btn-xs" lay-event="editModel"><i class="layui-icon layui-icon-edit">编辑</i></a>
	</script>
	<script type="text/javascript" src="/js/myjs.js"></script>
	<script>
	var table,tableIns,tableId='table';
	function initTable(){
		var params = {
			 id: "#table",
			 url: "/article/pageList",
			 columns: [
		    	{type: 'checkbox', fixed: 'left'},
		      	{type: 'numbers', title: '序号', fixed: 'left'},
		      	{field: 'title', title: '标题'},
		      	{field: 'create_time', title: '创建时间', templet: function(d){
		      		return util.toDateString(d.create_time);
		      	}},
		      	{field: 'type', title: '类型', sort: true},
		      	{fixed: 'right', title:'操作', fixed: 'right', toolbar: '#rowbarTpl'}
		    ]
		};
		tableIns = table_layui(table, params);
	}
	layui.use(['table', 'util'], function(){
		util = layui.util;
		table = layui.table;
		//初始化table
		initTable();
		//监听按钮事件
	    initFunction();
	});
	var active = {
		searchModel: function(table){
			var key = $("#key").val();
			tableIns.reload({
				where:{key: key}
		  	});
		},
		addModel: function(){
			openDialog('/article/saveOrUpdate');
		},
		deleteModel: function(){
			confirm_Delete("/article/deleteByIds", "id");
		},
		editModel: function(data){
			openDialog('/article/saveOrUpdate?id='+data.id);
		},
		preview: function(data){
			window.open("/article/preview/"+data.id);
		}
	}
	</script>
</body>
</html>