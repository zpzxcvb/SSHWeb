<!DOCTYPE html>
<html>
<head>
<title>用户信息</title>
	<link rel="stylesheet" href="/js/lib/layui/css/layui.css">
	
	<script src="/js/lib/layui/layui.js"></script>
	<script type="text/javascript" src="/js/lib/jquery-1.9.1.min.js"></script>
</head>
<body>

	<div class="demoTable">
  搜索ID：
  <div class="layui-inline">
    <input class="layui-input" name="id" id="demoReload" autocomplete="off">
  </div>
  <button class="layui-btn" data-type="reload">搜索</button>
</div>
	<table id="table" lay-filter="table"> </table>
	<script type="text/html" id="barDemo">
  <a class="layui-btn layui-btn-xs" lay-event="detail">查看</a>
  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
  
  <!-- 这里同样支持 laytpl 语法，如： -->
  {{#  if(d.auth > 2){ }}
    <a class="layui-btn layui-btn-xs" lay-event="check">审核</a>
  {{#  } }}
	</script>

	<script type="text/javascript" src="/js/myjs.js"></script>
	<script>
		layui.use('table', function(){
		  var table = layui.table;
		  var params = {
			 id: "#table",
			 url: "/user/findAll",
			 param: {name:"张三"},
			 columns: [
			    	{type: 'checkbox', fixed: 'left'},
			      	{type: 'numbers', title: '序号', width:80, fixed: 'left'},
			      	{field: 'userName', title: '用户名'},
			      	{field: 'createTime', title: '创建时间', sort: true},
			      	{field: 'loginTime', title: '登录时间'},
			      	{field: 'status', title: '状态', sort: true, templet: function(d){
			    	  	return d.status == 1 ? "可用" : "<span style='color: red;'>不可用</span>";
			      	}},
			      	{fixed: 'right', width:150, align:'center', toolbar: '#barDemo'} //这里的toolbar值是模板元素的选择器
			    ]
		  };
		  var s=table_layui(table, params)
		  console.log(s);
		  //监听工具条
		  table.on('tool(table)', function(obj){
		    var data = obj.data; //获得当前行数据
		    console.log(obj);
		    var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
		    var tr = obj.tr; //获得当前行 tr 的DOM对象
		   
		    if(layEvent === 'detail'){ //查看
		      layer.alert("查看");
		    } else if(layEvent === 'del'){ //删除
		      layer.confirm('真的删除行么', function(index){
		        obj.del();
		        layer.close(index);
		      });
		    } else if(layEvent === 'edit'){ //编辑
		    	layer.alert("查看");
		    }
		  });
		  table.on('checkbox(table)', function(obj){
			  console.log(obj); //当前是否选中状态
		  });
		});
	</script>
</body>
</html>